TechMarket AI — Capítulo 8 Tickets, Diagnóstico Preliminar con IA, SLAs, Agenda y Cotizaciones (operación profesional) Propósito del capítulo: convertir TechMarket AI en una plataforma operativa real. En este vertical, el “servicio” es tan importante como la venta. Este capítulo define el módulo que profesionaliza la atención: tickets, triage con IA, asignación, SLAs, agenda, cotizaciones y seguimiento con evidencia. 8.1. Por qué tickets y SLAs son el corazón de la confianza En reparación, soporte y servicios de redes, la confianza se destruye cuando: - no hay claridad de diagnóstico, - no hay tiempos, - no hay evidencia, - no hay seguimiento. Un sistema de tickets bien diseñado: - reduce conflictos, - acelera resolución, - crea reputación real, - alimenta el motor de compatibilidad y la IA. Principio enterprise: cada ticket debe ser auditable y reconstruible. 8.2. Tipos de tickets (mínimo viable) 8.2.1 Ticket de reparación laptop/pc/celular/consola/impresora. 8.2.2 Ticket de mantenimiento limpieza, pasta térmica, optimización. 8.2.3 Ticket de instalación redes, CCTV, configuración. 8.2.4 Ticket de armado/upgrade PC builder convertido en servicio. 8.2.5 Ticket de cotización pedido de precio sin diagnóstico profundo. Regla: el tipo define preguntas, campos y SLAs. 8.3. Estados del ticket (workflow robusto) Estados recomendados: - NEW (creado) - TRIAGE (preguntas iniciales) - ASSIGNED (asignado a técnico/equipo) - IN_PROGRESS (en atención) - WAITING_CUSTOMER (falta info/aprobación) - WAITING_PARTS (esperando repuesto) - QUOTED (cotización emitida) - APPROVED (cliente aprobó) - REJECTED (cliente rechazó) - RESOLVED (resuelto) - CLOSED (cerrado con evidencia) - CANCELLED (cancelado) Enterprise: separa RESOLVED (solución) de CLOSED (cierre administrativo + auditoría). 8.4. SLA (Service Level Agreement) por tipo de ticket 8.4.1 Qué SLA medimos Tiempo de primera respuesta . Tiempo a diagnóstico . Tiempo a cotización . Tiempo a resolución . 8.4.2 SLAs configurables Cada tenant puede configurar SLAs por: - tipo de ticket, - sucursal, - horario. Beneficio: - ranking y confianza. - operación interna. 8.5. Diagnóstico preliminar con IA (Triage inteligente) 8.5.1 Qué hace la IA Cuando el usuario crea ticket, la IA: - hace 3–7 preguntas inteligentes (según tipo), - clasifica urgencia, - sugiere causas probables, - sugiere acciones iniciales seguras, - estructura el ticket con campos útiles. 8.5.2 Qué NO debe hacer no debe prometer reparación. no debe afirmar causas sin evidencia. no debe sugerir acciones riesgosas (seguridad). 8.5.3 Modelo didáctico IA genera hipótesis con nivel de confianza. el técnico valida. 8.6. Diseño del ticket: campos mínimos (lo que evita la caja negra) 8.6.1 Campos del cliente tipo de dispositivo (laptop/pc/router/etc) marca/modelo (si sabe) síntomas (texto) fotos/videos disponibilidad (horarios) ubicación (si visita) 8.6.2 Campos operacionales tenant/sucursal prioridad asignado a SLA targets etiquetas historial de cambios 8.6.3 Evidencia y bitácora fotos antes/después piezas usadas (con referencia de catálogo) notas técnicas firmas/aceptación (fase 2) 8.7. Agenda (citas) y capacidad 8.7.1 Por qué agenda es clave mejora experiencia. reduce no-shows. ordena operación del negocio. 8.7.2 Modelo básico citas por sucursal. slots por tipo de servicio. capacidad por técnico. 8.7.3 Reglas tiempo estimado por tipo. buffers. confirmación por notificación. 8.8. Cotizaciones (quotes) dentro del ticket 8.8.1 Qué es una cotización Una cotización es un documento transaccional: - items (servicios + repuestos) - mano de obra - impuestos/descuentos - validez - condiciones 8.8.2 Flujo técnico diagnostica → genera quote. cliente aprueba/rechaza. si aprueba: pasa a ejecución. 8.8.3 Integración con catálogo repuestos seleccionados deben ser reference items. esto alimenta “carpeta técnica” y analítica. 8.9. Comunicación: WhatsApp y notificaciones El ticket debe notificar: - primera respuesta. - estado cambia. - cotización emitida. - recordatorio de cita. En MVP: - push/email + deep link a WhatsApp. En fase avanzada: - WhatsApp Business API. 8.10. Modelo de datos recomendado 8.10.1 PostgreSQL Tablas: - ticket - tenant_id , branch_id , customer_user_id - type , status , priority - title , symptom_text - assigned_to_user_id - sla_first_response_due_at , sla_resolve_due_at - timestamps + version ticket_message (conversación) ticket_id , sender_type (CUSTOMER/STAFF/SYSTEM) message_text , created_at ticket_status_history ticket_tag appointment ticket_id , starts_at , ends_at , technician_id , status quote ticket_id , status (DRAFT/SENT/APPROVED/REJECTED) total , currency , valid_until , version quote_item quote_id , type (SERVICE/PART/LABOR) reference_item_id (si part) qty , unit_price 8.10.2 MongoDB ticket_attachments (fotos/videos) ticket_ai_triage (preguntas, hipótesis, confidence) ticket_evidence (antes/después, reportes) 8.10.3 Redis locks para asignaciones rápidas. rate limit creación de tickets. cache de SLA dashboards. 8.11. APIs (tickets) 8.11.1 Cliente POST /tickets (crear) GET /tickets/my GET /tickets/{id} POST /tickets/{id}/message POST /tickets/{id}/attachments 8.11.2 Negocio GET /tenants/{tenantId}/tickets?status=&amp;branchId= PATCH /tickets/{id}/assign PATCH /tickets/{id}/status POST /tickets/{id}/quote POST /quotes/{id}/send 8.11.3 Cliente (cotización) POST /quotes/{id}/approve POST /quotes/{id}/reject 8.11.4 Agenda POST /tickets/{id}/appointments GET /branches/{branchId}/availability 8.12. Implementación con Spring Boot (paso a paso) Paso 1 — Modelado y migraciones tablas ticket , quote , appointment . estados y enums. @Version para concurrencia. Paso 2 — Seguridad multiempresa todas las queries filtradas por tenant. RLS para tickets del tenant. Paso 3 — Servicios de dominio TicketService (crear, asignar, cambiar estado) SlaService (calcular due dates) QuoteService (crear, aprobar) AppointmentService Paso 4 — Triage IA (Spring AI) TriageAssistantService : input: tipo, síntomas, contexto output: preguntas + hipótesis + campos estructurados Paso 5 — Notificaciones eventos: ticket_created, quote_sent, appointment_set. Paso 6 — Panel negocio bandeja de tickets vista ticket emisión de quote 8.13. KPIs operacionales (que alimentan confianza) tiempo primera respuesta tiempo a cotización tiempo a resolución tasa de aprobación de cotizaciones no-shows Estos KPIs alimentan ranking (Cap. 3/7) y analytics (Cap. 14). 8.14. Pruebas y definición de “listo” Casos esenciales crear ticket con attachments. IA triage genera preguntas. asignación y cambio de estado. cotización → aprobación. cita y recordatorios. Listo significa el usuario siente seguimiento real. el negocio opera con orden. se mide SLA. 8.15. Conexión con el Capítulo 9 Ahora que la operación está clara, el siguiente gran motor de crecimiento es: - Embajadores: atribución, cierres, antifraude, payout y ledger. Fin del Capítulo 8

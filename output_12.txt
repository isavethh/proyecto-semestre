TechMarket AI — Capítulo 9 Embajadores: Atribución, Cierres, Antifraude, Payout y Ledger (growth distribuido, profesional y verificable) Propósito del capítulo: diseñar e implementar el programa de Embajadores 3 niveles de TechMarket AI de forma enterprise , evitando el estigma de “MLM” con una verdad simple: aquí se paga por impacto verificable (negocios activados, premium, leads convertidos), con atribución clara, antifraude, cierres periódicos y un ledger auditable. 9.1. Por qué el programa Embajador es clave (sin romantizarlo) En mercados fragmentados, el mayor reto es activar oferta confiable por zona: tiendas y talleres reales, con catálogo, con operación, con disciplina. La adquisición centralizada (ads) puede ser costosa y lenta. El embajador crea un canal: - local, - de confianza, - con relaciones reales. Pero si se diseña mal: - aparece fraude, - reputación negativa, - comisiones injustas, - conflicto legal. Principio enterprise: el programa debe ser tan auditable como un sistema financiero. 9.2. Definición del “impacto verificable” Un embajador no gana por “invitar gente”, gana por: 9.2.1 Impacto A — Registro de negocio (supply onboarding) un negocio se registra correctamente. 9.2.2 Impacto B — Verificación del negocio el negocio pasa KYB (Cap. 3). 9.2.3 Impacto C — Activación operativa el negocio publica X listings o servicios. responde leads. abre su primer ticket. 9.2.4 Impacto D — Monetización el negocio se suscribe a premium. o genera transacciones/performance monetization. La comisión se amarra a estos eventos, no a promesas. 9.3. Estructura de 3 niveles (simple y controlada) 9.3.1 Niveles Nivel 1: embajador directo. Nivel 2: mentor (quien refiere al embajador nivel 1). Nivel 3: líder (nivel superior). 9.3.2 Filosofía La estructura no debe ser infinita. 3 niveles max reduce complejidad y riesgo. 9.3.3 Qué puede ver cada nivel Cada nivel ve métricas agregadas de su red (sin datos privados de tenants). No puede ver tickets, leads, costos ni información sensible. 9.4. Atribución (la pieza más importante) Sin atribución clara, no hay justicia ni antifraude. 9.4.1 Métodos de atribución Código de embajador (al registrar negocio). Link con tracking (deep link). QR para campañas locales. 9.4.2 Reglas de atribución (recomendadas) Un tenant tiene un embajador primario . Se permite cambio solo con: aprobación del negocio, verificación por soporte, auditoría. Conflictos se resuelven con evidencia (logs). 9.4.3 Ventana de atribución Para campañas: - si un negocio inicia registro desde link/QR, la atribución queda “pendiente” por 7–14 días. 9.5. Plan de comisiones (sin inventar números) No fijamos porcentajes aquí sin estrategia financiera. Definimos el modelo : 9.5.1 Tipos de comisión CPA (costo por adquisición): por negocio verificado. Activation bonus: por hitos operativos. Revenue share: % de suscripción premium del negocio durante X meses. Performance share: % por transacciones/lead fees. 9.5.2 Periodos pagos semanales o quincenales (recomendado para motivación). cierres y payout por ciclo. 9.5.3 Reglas de elegibilidad no se paga si el negocio es fraude. no se paga si hay reverso (chargeback) dentro de ventana. Enterprise: define claramente reversos y clawbacks. 9.6. Ledger (libro mayor) y payouts: diseño financiero auditable 9.6.1 Por qué ledger Porque embajadores, cierres y comisiones son dinero. Necesitas: - trazabilidad, - conciliación, - auditoría. 9.6.2 Entidades del ledger commission_event (evento que genera posible comisión) commission_calculation (cálculo por regla) payout_cycle (cierre semanal) payout (orden de pago) ledger_entry (debe/haber o entradas) 9.6.3 Flujos ocurre evento (tenant verified / premium subscribed). se calcula comisión (según reglas vigentes). se acumula en ciclo. se valida antifraude. se genera payout. 9.7. Antifraude (indispensable) 9.7.1 Riesgos típicos negocios falsos registrados para cobrar. embajadores creando múltiples cuentas. manipulación de verificación. colusión (embajador + negocio) sin operación real. 9.7.2 Señales antifraude (rules + IA) múltiples tenants con mismo teléfono/dirección. patrones de registro masivo en horas. verificación repetida desde mismos dispositivos. ausencia de actividad real post registro. 9.7.3 Controles verificación KYB fuerte (Cap. 3). rate limit por IP/dispositivo. scoring de riesgo por embajador. retención de pagos en casos sospechosos. Regla: antifraude debe existir antes de masificar el programa. 9.8. UX del Embajador (dashboard que guía productividad) 9.8.1 Pantallas mínimas onboarding embajador (identidad y términos) mi código / QR registrar negocio (wizard) mi red (niveles 1–3) con métricas agregadas cierres y pagos alertas (pendiente de verificación, docs incompletos) 9.8.2 Métricas que importan negocios registrados negocios verificados activaciones operativas premium activados ingresos estimados Foco: productividad, no “árboles”. 9.9. Modelo de datos recomendado 9.9.1 PostgreSQL Tablas: - ambassador - user_id , status , risk_score , timestamps ambassador_referral ambassador_id , referred_ambassador_id , level tenant_attribution tenant_id , ambassador_id , attributed_at , source commission_rule versión de reglas vigentes commission_event type (TENANT_VERIFIED, PREMIUM_SUB) tenant_id , ambassador_id , created_at commission_calculation event_id , amount , currency , status (PENDING/APPROVED/REVERSED) payout_cycle starts_at , ends_at , status payout ambassador_id , cycle_id , amount , status ledger_entry account , debit , credit , ref_type , ref_id 9.9.2 MongoDB ambassador_documents (KYC, contratos) fraud_reviews (casos, evidencia) 9.9.3 Redis rate limiting cache de dashboards 9.10. APIs (Embajador) 9.10.1 Cliente embajador POST /ambassadors/register GET /ambassadors/me GET /ambassadors/me/code POST /ambassadors/tenants/register (registro tenant con attribution) GET /ambassadors/me/network GET /ambassadors/me/payouts 9.10.2 Backoffice GET /backoffice/ambassadors?risk= POST /backoffice/commission/{id}/approve POST /backoffice/commission/{id}/reverse POST /backoffice/payout-cycles/{id}/close POST /backoffice/payouts/{id}/mark-paid 9.11. Implementación (paso a paso) Paso 1 — Atribución sólida construir tenant_attribution . link/QR tracking. Paso 2 — Eventos emitir eventos cuando: tenant verified, tenant activated, premium subscribed. Paso 3 — Motor de comisiones reglas versionadas. cálculo idempotente. Paso 4 — Ciclos y payout job semanal. validación antifraude. Paso 5 — Dashboard métricas agregadas. Paso 6 — Antifraude scoring. hold/review. 9.12. Pruebas y definición de “listo” Casos esenciales atribución correcta por código. comisión se genera por tenant verified. payout cycle cierra. reverso por fraude. Listo significa embajador gana cuando hay valor real. el sistema resiste abuso básico. 9.13. Conexión con el Capítulo 10 Un programa de embajadores acelera crecimiento, pero puede dañar reputación si no hay control social. El siguiente capítulo construye: - Reputación, moderación y antifraude (publicaciones, reseñas, servicios). Fin del Capítulo 9

TechMarket AI — Capítulo 11 CRM Operativo: Leads, WhatsApp Tracking, Follow‑ups y Campañas (convertir sin perder control) Propósito del capítulo: transformar a TechMarket AI en una plataforma que no solo trae clientes , sino que ayuda a los negocios a convertir y retener . En este rubro, el problema no es “no tener WhatsApp”: es no tener proceso . Este capítulo construye un CRM simple, accionable y medible, integrado con el tracking de WhatsApp (Cap. 6) y con tickets/cotizaciones (Cap. 8). 11.1. Por qué un CRM en TechMarket AI es un diferenciador Muchos negocios de electrónica/computación operan con: - conversaciones dispersas, - cotizaciones sin seguimiento, - leads que se enfrían, - cero métricas. Esto limita el crecimiento y la calidad. Un CRM operativo permite: - medir velocidad de respuesta (impacta reputación y ranking), - hacer seguimiento sistemático, - convertir más con el mismo tráfico, - retener y recomprar (accesorios, mantenimiento). Principio enterprise: lo que no se mide, no se mejora. 11.2. Definición de Lead (qué es y qué no) 11.2.1 Lead Un lead es una intención de compra o servicio que llegó al negocio. Puede nacer de: - click a WhatsApp (tracking), - apertura de ticket, - cotización solicitada, - interacción con listing. 11.2.2 No confundir con Ticket Lead: fase comercial (pre‑servicio). Ticket: fase de atención formal con SLA. En TechMarket AI deben conectarse: - un lead puede convertirse en ticket. - un ticket puede generar cotización. 11.3. Funnel comercial mínimo (pipeline) Pipeline simple (pero efectivo): 1) NEW (nuevo lead) 2) CONTACTED (respondido) 3) QUALIFIED (calificado) 4) QUOTED (cotizado) 5) WON (ganado) 6) LOST (perdido) 7) DORMANT (enfriado) Regla: pipeline corto, porque el negocio es pequeño/mediano. 11.4. WhatsApp Tracking (puente entre app y CRM) 11.4.1 La realidad WhatsApp es el canal principal en LatAm. Pero si lo usas sin tracking: - pierdes atribución, - no hay métricas, - no hay automatización. 11.4.2 Enfoque MVP: deep links con tracking Cuando el usuario hace click: - se genera URL con: - tenantId , branchId , listingId , campaign , source , userId . - backend registra evento: - lead_created o whatsapp_clicked . - se crea un lead en el CRM. 11.4.3 Enfoque fase avanzada: WhatsApp Business API mensajes desde plataforma. plantillas. historial centralizado. Nota: MVP no depende de esto. 11.5. Lead qualification (calificación automática con IA) 11.5.1 Qué debe hacer la IA Con la información del usuario y su intención, IA puede: - clasificar tipo de lead (venta vs servicio). - sugerir prioridad. - sugerir respuesta inicial. - sugerir productos alternativos. 11.5.2 Output estructurado lead_type priority suggested_reply next_best_action Beneficio: el negocio responde mejor y más rápido. 11.6. Follow-ups: disciplina de seguimiento La mayoría de ventas se pierden por falta de seguimiento. 11.6.1 Reglas simples si lead está en NEW más de X horas → alerta. si QUOTED más de Y días sin respuesta → follow‑up. si DORMANT → campaña de reactivación. 11.6.2 Automatización recordatorios al vendedor. sugerencias de mensajes. tareas en el panel. 11.7. Campañas (promos) orientadas a resultados 11.7.1 Tipos de campañas campañas por categoría (gaming, regreso a clases). campañas por zona. campañas por reactivación (clientes antiguos). 11.7.2 Segmentación (mínimo viable) clientes que vieron X y no compraron. leads perdidos por precio. usuarios interesados en redes. 11.7.3 Métricas impresiones clicks leads conversiones 11.8. Integración con tickets y cotizaciones (Cap. 8) 11.8.1 Lead → Ticket Si el lead es de servicio: - convertir lead a ticket con un click. 11.8.2 Lead → Cotización Si es compra: - generar quote (cotización) usando items del catálogo. 11.8.3 Lead y reputación tiempo de respuesta influye en score. 11.9. Tablero del negocio (CRM UI) 11.9.1 Bandeja de leads lista filtrable: NEW, CONTACTED, etc. orden por prioridad/tiempo. 11.9.2 Vista de lead datos del usuario (mínimos) origen (campaign, listing) historial de eventos notas internas acciones: WhatsApp, convertir a ticket, cotizar, marcar ganado/perdido. 11.9.3 Tareas y recordatorios “seguir en 24h” “enviar promo” 11.10. Modelo de datos recomendado 11.10.1 PostgreSQL Tablas: - lead - tenant_id , branch_id - customer_user_id (nullable si no logueado) - status (NEW/CONTACTED/…) - source (MAP/LISTING/FEED/WHATSAPP) - campaign_id (nullable) - priority , assigned_to_user_id - timestamps + version lead_event lead_id type (CREATED, WHATSAPP_CLICK, MESSAGE_SENT, QUOTE_SENT) payload JSON created_at lead_note lead_id , author_user_id , text , created_at campaign tenant_id name , type , status start_at , end_at campaign_metric_daily campaign_id , day , impressions , clicks , leads , wins 11.10.2 MongoDB lead_ai_assistance (suggested_reply, classification, confidence) campaign_assets (imágenes, copys) 11.10.3 Redis cache de bandejas counters rápidos rate limit mensajes 11.11. APIs 11.11.1 Leads GET /tenants/{tenantId}/leads?status=&amp;branchId=&amp;assignedTo= GET /leads/{id} PATCH /leads/{id} (status, assigned) POST /leads/{id}/notes POST /leads/{id}/convert-to-ticket POST /leads/{id}/create-quote 11.11.2 Eventos (tracking) POST /tracking/whatsapp-click (crea/actualiza lead) POST /tracking/listing-view 11.11.3 Campañas POST /campaigns PATCH /campaigns/{id} POST /campaigns/{id}/activate GET /campaigns/{id}/metrics 11.12. Implementación con Spring Boot + Spring AI (paso a paso) Paso 1 — Eventos de tracking implementar endpoints de tracking. crear lead + lead_event. Paso 2 — CRUD de leads bandeja por tenant/branch. asignación. Paso 3 — Follow-up engine job que detecta leads fríos. crea tareas/alertas. Paso 4 — IA para respuesta sugerida LeadAssistantService : input: lead data + intent output: reply + next steps. Paso 5 — Campañas crear campañas simples. medir clicks/leads. Paso 6 — Integración con tickets/cotizaciones convertir con un click. 11.13. KPIs del CRM (lo que se debe medir) tiempo a primera respuesta leads por fuente conversion rate (WON) win rate por sucursal follow‑up compliance Esto alimenta analytics (Cap. 14) y reputación/ranking. 11.14. Pruebas y definición de “listo” Casos esenciales click WhatsApp crea lead. lead se asigna. IA sugiere respuesta. follow-up alerta. lead convierte a ticket. Listo significa el negocio ya no pierde leads. se mide conversión. 11.15. Conexión con el Capítulo 12 Ahora que capturamos y convertimos, toca monetizar transacciones y comisiones: - Transacciones, pagos, comisiones y performance monetization. Fin del Capítulo 11
